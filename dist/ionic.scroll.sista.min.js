!function(e,t){"use strict";e.module("jett.ionic.scroll.sista",["ionic"]).directive("scrollSista",["$document","$timeout","$rootScope","$ionicScrollDelegate",function(a,n,r,o){function i(e,t,a,n){var r;for(n=n||10;e.parentNode&&n--;){if(r=e.parentNode.getAttribute(t),r&&r===a)return e.parentNode;e=e.parentNode}return null}var c=t.Platform.isAndroid()?!1:!0;return{restrict:"A",link:function(r,s,l){function u(e,a,n){n&&!e.style[t.CSS.TRANSITION_DURATION]&&(e.style[t.CSS.TRANSITION_DURATION]=n),e.style[t.CSS.TRANSFORM]="translateY("+-a+"px)"}function d(){m=0,p=0,v=0}function f(){var e;if(N=O.querySelector('[nav-bar="cached"] .bar-header'),g=O.querySelector('[nav-bar="active"] .bar-header'))switch(y=g.offsetHeight,A=y,T=O.querySelectorAll(".tabs"),T=T[T.length-1],T&&(k=T.offsetHeight,T.parentNode.classList.contains("tabs-top")?(w=!0,A+=k):T.parentNode.classList.contains("tabs-bottom")&&(D=!0)),e=i(s[0],"nav-view","active"),$=e&&e.querySelector(".bar-subheader"),$&&(M=$.offsetHeight,A+=M),R=2*A,x=C=H=R,k=k||0,M=M||0,l.scrollSista){case"header":H=y,C=w?y:0;break;case"header-tabs":E=w?k:0,H=w?y+k:y;break;case"tabs-subheader":x=0,E=w?A-y:M,F=w?M:0;break;case"tabs":x=0,H=w?k:0;break;case"subheader":x=0,C=0;break;case"header-subheader":C=w?y:0;break;case"subheader-header":E=M,F=w?M:0,C=w?y:0;break;default:E=w?A-y:M,F=w?M:0}}function b(a,n){var r=Math.max(0,1-a/y);g&&(u(g,a,n),"false"!=l.enableTranslucent&&e.forEach(g.children,function(e){e.style.opacity=r,c&&(e.style[t.CSS.TRANSFORM]="scale("+r+","+r+")")})),N&&u(N,a,n)}function h(e,t){var a,n,r=s[0].style,o=e>E?e-E:0;$&&(n=e>L?e-L:0,u($,Math.min(H,n),t)),T&&(a=Math.min(C,e>F?e-F:0),D&&(a=-a,r.bottom=Math.max(0,k-e)+"px"),u(T,a,t)),b(Math.min(x,o),t),r.top=Math.max(0,A-e)+"px"}function S(e,a){t.requestAnimationFrame(function(){h(e,a)})}var m,p,v,N,g,y,A,$,M,T,k,R,x,C,H,I=!0,O=a[0].body,q=l.delegateHandle?o.$getByHandle(l.delegateHandle):o,w=(q.getScrollView(),!1),D=!1,E=0,F=0,L=0;r.$on("scroll.refreshComplete",function(){d()}),r.$on("$stateChangeSuccess",function(e,t,a,n,r){I=!0,h(0),g=null,N=null}),r.$parent.$on("$ionicView.afterEnter",function(){d(),n(function(){f(),I=!1},20,!1)}),s.bind("scroll",function(e){if(!I){e=e.originalEvent||e;var t=e.detail.scrollTop;m=t>=0?Math.min(R,Math.max(0,m+t-v)):0,v=t,p!==m&&(p=m,S(m,0))}})}}}])}(angular,ionic);